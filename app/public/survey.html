<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Survey</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Font Awesome Glyphicons -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Abril+Fatface" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ"
        crossorigin="anonymous">
    <style>
        html,
        body {
            height: 100%
        }

        body {
            font-size: 1.6rem;
            margin: 0 auto;
        }

        .jumbotron {
            background-image: url("https://i.pinimg.com/originals/4e/6e/1e/4e6e1eea94e58cd01484634c393b04d0.jpg");
            background-repeat: no-repeat;
            background-position: center;
            background-size: cover;
        }

       .jumbotron h1 {
            font-size: 5rem;

        }

        .jumbotron p {
            margin-top: 5px;
            color: black;
            background-color: white;
            font-weight: bold;
        }

        .footer p {
            color: black;
        }


        #appName,
        #buttonTitle, #questions h2, #submit{
            font-family: 'Abril Fatface', cursive;
            color:black;
        }

        #submit, #buttonTitle{
            color:white;
        }

        .surveyBtn{
            margin-top:160px;
        }

        .far {
            text-transform: uppercase;
            font-weight: bold;
        }

        #questions h2 {
            text-align: center;
        }

        .link {
            color: black;
            font-size: 1rem;
        }
    </style>

</head>

<body>
    <div class="jumbotron jumbotron-fluid">
        <div class="container">
            <h1 id="appName" class="display-4 text-center">Friend Finder</h1>
            <p class="lead text-center">10 Simple Questions; A Lifetime of Companionship!</p>
            <div class="row justify-content-center">
                    <a href="/">
                        <button type="button" class="btn btn-lg btn-primary surveyBtn">
                            <h4 id="buttonTitle">
                                Main Page
                            </h4>
                        </button>
                    </a>
                </div>
        </div>
    </div>
    
    <div class="container" id="questions">
        <h2>Take Our Survey</h2>
        <br>
        
        <h4>Name</h4>
        <input type="text" id="name" class="form-control" required="">
        <br>
        <h4>Link to Photo Image (Required)</h4>
        <input type="text" id="photo" class="form-control" required="">
        <br>
        
        <h3>
            <strong>Question 1</strong>
        </h3>
        <h4>In times of conflict, you become more emotional than logical.</h4>
        <select class="chosen-select" id="q1">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>
        
        <h3>
            <strong>Question 2</strong>
        </h3>
        <h4>You don't get upset easily.</h4>
        <select class="chosen-select" id="q2">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>
        
        <h3>
            <strong>Question 3</strong>
        </h3>
        <h4>You see yourself as being prone to impatience.</h4>
        <select class="chosen-select" id="q3">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>
        
        <h3>
            <strong>Question 4</strong>
        </h3>
        <h4>Your friends describe you as someone who likes to stay fit.</h4>
        <select class="chosen-select" id="q4">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>
        
        <h3>
            <strong>Question 5</strong>
        </h3>
        <h4>You like to follow rules and are not tolerant of anyone breaking them.</h4>
        <select class="chosen-select" id="q5">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>
        
        <h3>
            <strong>Question 6</strong>
        </h3>
        <h4>You are a very busy individual and don't get time to be at home much.</h4>
        <select class="chosen-select" id="q6">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>

        <h3>
            <strong>Question 7</strong>
        </h3>
        <h4>You don't mind taking the time to get to know shy individuals.</h4>
        <select class="chosen-select" id="q7">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>
        
        <h3>
            <strong>Question 8</strong>
        </h3>
        <h4>You prefer a quiet evening at home to a social outing with friends.</h4>
        <select class="chosen-select" id="q8">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>
        
        <h3>
            <strong>Question 9</strong>
        </h3>
        <h4>You are a planner and dislike surprises.</h4>
        <select class="chosen-select" id="q9">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>
        
        <h3>
            <strong>Question 10</strong>
        </h3>
        <h4>You are often described as a couch potato.</h4>
        <select class="chosen-select" id="q10">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <br>
        <br>
        
        <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">
            <i class="fa fa-check-circle" aria-hidden="true"></i>
            Submit
        </button>
        <br>
        <br>      
    </div>
       
    <footer class="footer" id="surveyfooter">
        <div class="container">
            <p class="text-center">
                <a class="link" href="/api/friends">API Friends List</a> |
                <a class="link" href="https://github.com/Apbh/FriendFinder">GitHub Repo</a> |
                <a class="link" href="/">Main Page</a>
                
            </p>
        </div>
    </footer>
    
    <div id="resultsModal" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">
                        <strong>Say Hi To Your New Best Friend!</strong>
                    </h2>
                </div>
                <div class="modal-body">
                    <h2 id="matchName"></h2>
                    <img id="matchImage" class="img-responsive" src="" style="max-width:100%; height:400px" alt="An image of your best match">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>   
    
</body>

</html>

<script type="text/javascript">

    $("#submit").on("click", function (event) {
        console.log(event);
        event.preventDefault();

        //survey validation
        if ($("#name").val() === "" || $("#photo").val() === "") {
            alert("Please complete all fields.");
            } else if ($("#q1").val() === "" || $("#q2").val() === "" || $("#q3").val() === "" || $("#q4").val() === "" || $("#q5").val() === "" || $("#q6").val() === "" || $("#q7").val() === "" || $("#q8").val() === "" || $("#q9").val() === "" || $("#q10").val() === "") {
            alert("Please complete all fields.");
        }
        else {
            var newFriend = {
                name: $("#name").val().trim(),
                photo: $("#photo").val().trim(),
                scores: [
                    $("#q1").val(),
                    $("#q2").val(),
                    $("#q3").val(),
                    $("#q4").val(),
                    $("#q5").val(),
                    $("#q6").val(),
                    $("#q7").val(),
                    $("#q8").val(),
                    $("#q9").val(),
                    $("#q10").val(),

                ]

            }
            console.log(newFriend);

            //Clear all fields
            $("#name").val("");
            $("#photo").val("");
            $("#q1").val("");
            $("#q2").val("");
            $("#q3").val("");
            $("#q4").val("");
            $("#q5").val("");
            $("#q6").val("");
            $("#q7").val("");
            $("#q8").val("");
            $("#q9").val("");
            $("#q10").val("");

            var currentURL = window.location.origin;
            $.post(currentURL + "/api/friends ", newFriend, function (data) {
                $("#matchName").text(data.name);
                $("#matchImage").attr("src", data.photo);
                $("#resultsModal ").modal('toggle');

            })
        }

    });

</script>